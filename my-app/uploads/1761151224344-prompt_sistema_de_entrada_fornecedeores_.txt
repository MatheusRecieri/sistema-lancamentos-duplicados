# Prompt Completo: Sistema de Gest√£o de Processos Societ√°rios

## üìã CONTEXTO DO PROJETO

Preciso desenvolver um sistema web completo para gerenciar processos societ√°rios (constitui√ß√£o, altera√ß√£o e baixa de empresas) entre um escrit√≥rio de contabilidade e seus clientes.

---

## üéØ OBJETIVO

Criar uma plataforma que permita aos clientes do escrit√≥rio de contabilidade enviarem solicita√ß√µes de processos societ√°rios de forma organizada, respeitando prazos e padr√µes estabelecidos, substituindo o processo atual feito por email/WhatsApp.

---

## üë• USU√ÅRIOS DO SISTEMA

### 1. **Clientes (Empresas)**
- Preenchem formul√°rios de processos
- Fazem upload de documentos obrigat√≥rios
- Acompanham status dos processos
- Recebem notifica√ß√µes e protocolos
- Trocam mensagens com a contabilidade

### 2. **Contadores (Contabilidade LTDA)**
- Recebem e analisam processos
- Atualizam status dos processos
- Solicitam documentos complementares
- Comunicam-se com clientes
- Visualizam dashboard de processos

### 3. **Administrador**
- Gerencia usu√°rios
- Acessa relat√≥rios
- Configura sistema

---

## üìù FUNCIONALIDADES PRINCIPAIS

### **M√ìDULO 1: Autentica√ß√£o e Cadastro**
- Cadastro de clientes (nome, email, CPF, telefone, senha)
- Login com email/senha
- Recupera√ß√£o de senha
- Perfis de usu√°rio (cliente, contador, admin)

### **M√ìDULO 2: Constitui√ß√£o de Empresa**

**Campos do formul√°rio:**
- Raz√£o Social (obrigat√≥rio)
- Nome Fantasia (opcional)
- √Årea utilizada (m¬≤) (obrigat√≥rio)
- √Årea total da edifica√ß√£o (m¬≤) (obrigat√≥rio)
- Endere√ßo completo com CEP (obrigat√≥rio)
- √çndice do IPTU (obrigat√≥rio)
- Capital Social (obrigat√≥rio)
- Regime tribut√°rio (obrigat√≥rio):
  - Simples Nacional
  - Lucro Real
  - Lucro Presumido
- Objetivo social descrito corretamente (obrigat√≥rio)
- CNAE (obrigat√≥rio)
- Respons√°vel perante o CNPJ (obrigat√≥rio)
- S√≥cio Administrador (obrigat√≥rio)
- Assinaturas (upload de documento)

### **M√ìDULO 3: Baixa de Empresa**

**Campos do formul√°rio:**
- Nome da empresa (obrigat√≥rio)
- CNPJ (obrigat√≥rio)
- Data da Baixa (obrigat√≥rio)
- Os S√≥cios: (obrigat√≥rio)
  - Nada Recebem
  - Recebem (descrever valores)
- Assinatura (upload de documento)

### **M√ìDULO 4: Altera√ß√£o de Empresa**

**4.1 Contratual (Abertura de Filial):**
- Nome da empresa
- CNPJ
- Nome Fantasia (se houver)
- √Årea total da edifica√ß√£o
- Endere√ßo completo
- √çndice do IPTU
- Capital social
- Objetivo social
- CNAE

**4.2 Altera√ß√£o de Endere√ßo:**
- Nome da empresa
- CNPJ
- Endere√ßo completo com CEP (com validador de CEP)
- √çndice de IPTU
- √Årea utilizada (m¬≤)
- √Årea total da edifica√ß√£o

**4.3 Altera√ß√£o de Natureza:**
- Nome da empresa
- CNPJ
- Op√ß√µes:
  - Sociedade Empres√°ria Limitada
  - Sociedade An√¥nima Aberta
  - Sociedade An√¥nima Fechada
  - Empres√°rio

**4.4 Altera√ß√£o de Nome Empresarial:**
- Nome da empresa atual
- CNPJ
- Novo nome da empresa

**4.5 Altera√ß√£o de Objetivo:**
- Nome da empresa
- CNPJ
- Objetivo social (novo)

**4.6 Altera√ß√£o de Quadro Societ√°rio:**
- Nome da Empresa
- CNPJ
- Tipo de altera√ß√£o:
  - Sa√≠da de S√≥cio
  - Entrada de S√≥cio

**Dados do S√≥cio (se entrada):**
- Nome
- Profiss√£o
- Estado civil
- Sob o regime de (regime de casamento)
- Data de nascimento
- Identidade (RG/CPF)
- Upload de PDF da identidade
- Endere√ßo residencial completo
- Participa√ß√£o na sociedade (%)
- Valor (R$)

### **M√ìDULO 5: Gest√£o de Documentos**
- Upload m√∫ltiplo de arquivos (PDF, JPG, PNG)
- Valida√ß√£o de tipo e tamanho de arquivo
- Armazenamento seguro
- Download de documentos
- Visualiza√ß√£o de documentos

### **M√ìDULO 6: Sistema de Protocolo**
- Gera√ß√£o autom√°tica de n√∫mero √∫nico de protocolo (formato: AAAA-NNNN)
- Registro de data/hora de envio
- PDF do protocolo para download
- Valida√ß√£o de prazo de 72h de anteced√™ncia (obrigat√≥rio)

### **M√ìDULO 7: Dashboard e Acompanhamento**
- Dashboard do cliente:
  - Resumo (processos em andamento, pendentes, conclu√≠dos)
  - Lista de processos
  - Status de cada processo
  - Bot√£o "Novo Processo"
- Dashboard do contador:
  - Todos os processos recebidos
  - Filtros por empresa, tipo, status, data
  - Atribui√ß√£o de processos
  - Atualiza√ß√£o de status

### **M√ìDULO 8: Sistema de Comunica√ß√£o**
- Chat/mensagens entre cliente e contador por processo
- Notifica√ß√µes de novas mensagens
- Hist√≥rico de conversas
- Anexos em mensagens

### **M√ìDULO 9: Notifica√ß√µes**
- Email de confirma√ß√£o de cadastro
- Email de processo enviado com protocolo
- Notifica√ß√£o de mudan√ßa de status
- Notifica√ß√£o de nova mensagem
- Alerta de prazo de 72h

### **M√ìDULO 10: Relat√≥rios**
- Relat√≥rio de processos por per√≠odo
- Relat√≥rio de processos por tipo
- Tempo m√©dio de conclus√£o
- Processos em atraso
- Cumprimento de prazos

---

## üîÑ FLUXO DO SISTEMA

### Fluxo do Cliente:
1. Acessa o site
2. Faz cadastro ou login
3. Acessa dashboard
4. Clica em "Novo Processo"
5. Escolhe tipo (Constitui√ß√£o/Altera√ß√£o/Baixa)
6. Preenche formul√°rio em etapas (wizard)
7. Faz upload de documentos obrigat√≥rios
8. Revisa informa√ß√µes
9. Sistema valida prazo de 72h
10. Envia processo
11. Recebe protocolo e email de confirma√ß√£o
12. Acompanha status no dashboard
13. Troca mensagens com contador se necess√°rio

### Fluxo do Contador:
1. Recebe notifica√ß√£o de novo processo
2. Acessa dashboard
3. Visualiza detalhes do processo
4. Analisa documentos
5. Atualiza status
6. Solicita documentos complementares (se necess√°rio)
7. Marca processo como conclu√≠do
8. Cliente recebe notifica√ß√£o

---

## üèóÔ∏è ARQUITETURA T√âCNICA

### **Stack Tecnol√≥gica:**

**Frontend:**
- Next.Js

**Backend:**
- Node.js 18+
- Express.js + TypeScript
- Prisma ORM
- PostgreSQL
- JWT (autentica√ß√£o)
- Bcrypt (hash de senhas)
- Multer (upload de arquivos)
- Nodemailer (envio de emails)
- Zod (valida√ß√£o de dados)

**Infraestrutura:**
- Frontend: Vercel (hospedagem)
- Backend + Banco: Railway (hospedagem)
- Arquivos: AWS S3 ou servidor local (h√≠brido)
- Email: SendGrid
- Comunica√ß√£o h√≠brida: Cloudflare Tunnel (se necess√°rio)

### **Arquitetura H√≠brida (Opcional):**
- Frontend e Backend na cloud
- Documentos sens√≠veis armazenados em servidor local do escrit√≥rio
- Comunica√ß√£o segura via Cloudflare Tunnel ou VPN
- Autentica√ß√£o m√∫tua com certificados

---

## üóÑÔ∏è MODELO DE DADOS

### **Tabelas Principais:**

**1. usuarios**
- id, nome_completo, email, cpf, telefone, senha_hash
- tipo_usuario (cliente/contador/admin)
- data_cadastro, ultimo_acesso, ativo

**2. processos**
- id, protocolo, tipo_processo, subtipo
- usuario_id (FK)
- status (rascunho/enviado/em_analise/pendente_doc/concluido/cancelado)
- data_criacao, data_envio, data_conclusao
- prazo_72h_valido, dados_json, observacoes

**3. documentos**
- id, processo_id (FK), tipo_documento
- nome_arquivo, tamanho_bytes, url_storage, mime_type
- hash_md5, data_upload, uploaded_by (FK)

**4. mensagens**
- id, processo_id (FK)
- remetente_id (FK), destinatario_id (FK)
- mensagem_texto, data_envio, lida, data_leitura

**5. protocolos**
- id, numero_protocolo, processo_id (FK)
- data_geracao, hash_verificacao, pdf_url

**6. audit_logs**
- id, usuario_id (FK), action, resource, resource_id
- ip_address, user_agent, timestamp

---

## üîí REQUISITOS DE SEGURAN√áA

### Obrigat√≥rios:
- HTTPS/SSL em todas as comunica√ß√µes
- Senhas com hash bcrypt (salt rounds >= 10)
- JWT com expira√ß√£o para autentica√ß√£o
- Valida√ß√£o de entrada em todos os formul√°rios
- Rate limiting (100 requisi√ß√µes por 15min por IP)
- CORS configurado (apenas frontend permitido)
- Headers de seguran√ßa (Helmet)
- Upload de arquivos com valida√ß√£o de tipo e tamanho
- Sanitiza√ß√£o de dados de entrada
- Logs de auditoria (LGPD)
- Criptografia de documentos armazenados
- Backup autom√°tico di√°rio

### Valida√ß√µes de Dados:
- CEP: formato 00000-000 e valida√ß√£o via API ViaCEP
- CNPJ: formato 00.000.000/0000-00 e d√≠gitos verificadores
- CPF: formato 000.000.000-00 e d√≠gitos verificadores
- Email: formato v√°lido
- Telefone: formato brasileiro
- Participa√ß√£o societ√°ria: soma = 100%
- Capital social: valor > 0
- Prazo: >= 72 horas de anteced√™ncia

---

## üì± INTERFACE DO USU√ÅRIO

### Caracter√≠sticas:
- Design moderno e profissional
- Responsivo (mobile, tablet, desktop)
- Formul√°rios em etapas (wizard) para processos longos
- Feedback visual em todas as a√ß√µes
- Loading states e mensagens de erro claras
- Confirma√ß√µes antes de a√ß√µes cr√≠ticas
- Barra de progresso em formul√°rios
- Notifica√ß√µes toast para alertas

### Paleta de Cores Sugerida:
- Prim√°ria: #2563eb (Azul profissional)
- Secund√°ria: #10b981 (Verde sucesso)
- Alerta: #f59e0b (Laranja aten√ß√£o)
- Erro: #ef4444 (Vermelho)
- Neutro: #64748b (Cinza)

---

## üöÄ FASES DE DESENVOLVIMENTO

### FASE 1: MVP (2-3 semanas)
- Autentica√ß√£o (cadastro, login, recupera√ß√£o de senha)
- Formul√°rio de Constitui√ß√£o completo
- Upload de documentos
- Sistema de protocolo
- Dashboard b√°sico
- Notifica√ß√µes por email

### FASE 2: Expans√£o (2 semanas)
- Formul√°rio de Baixa
- Formul√°rio de Altera√ß√£o (todos os tipos)
- Sistema de mensagens
- Dashboard completo

### FASE 3: Refinamento (1-2 semanas)
- Relat√≥rios
- Melhorias de UX
- Testes completos
- Deploy em produ√ß√£o

### FASE 4: H√≠brido (opcional, ap√≥s valida√ß√£o)
- Integra√ß√£o com servidor local
- Cloudflare Tunnel
- Sincroniza√ß√£o de dados

---

## ‚úÖ CRIT√âRIOS DE ACEITA√á√ÉO

### Funcionalidade:
- [ ] Cliente consegue criar conta e fazer login
- [ ] Cliente consegue criar processo de constitui√ß√£o completo
- [ ] Cliente consegue criar processo de baixa completo
- [ ] Cliente consegue criar todos os tipos de altera√ß√£o
- [ ] Sistema valida prazo de 72h corretamente
- [ ] Upload de documentos funciona (m√∫ltiplos arquivos)
- [ ] Protocolo √© gerado automaticamente
- [ ] Email de confirma√ß√£o √© enviado
- [ ] Contador recebe notifica√ß√£o de novo processo
- [ ] Status do processo pode ser atualizado
- [ ] Mensagens entre cliente e contador funcionam
- [ ] Dashboard mostra informa√ß√µes corretas

### Seguran√ßa:
- [ ] Senhas s√£o armazenadas com hash
- [ ] JWT expira corretamente
- [ ] HTTPS ativo em produ√ß√£o
- [ ] Valida√ß√£o de entrada em todos os formul√°rios
- [ ] Upload valida tipo e tamanho de arquivo
- [ ] Rate limiting ativo
- [ ] CORS configurado
- [ ] Logs de auditoria funcionando

### Performance:
- [ ] P√°gina carrega em < 3 segundos
- [ ] Upload de arquivo < 10MB leva < 5 segundos
- [ ] Formul√°rio n√£o trava com muitos campos

### Usabilidade:
- [ ] Interface funciona em mobile
- [ ] Formul√°rios t√™m valida√ß√£o em tempo real
- [ ] Mensagens de erro s√£o claras
- [ ] Usu√°rio sempre sabe onde est√°
- [ ] Processo de envio tem confirma√ß√£o

---

## üìù DOCUMENTA√á√ÉO NECESS√ÅRIA

- [ ] README com instru√ß√µes de instala√ß√£o
- [ ] Documenta√ß√£o de API (endpoints, request/response)
- [ ] Diagrama de fluxo de dados
- [ ] Diagrama entidade-relacionamento (banco)
- [ ] Manual do usu√°rio (cliente)
- [ ] Manual do usu√°rio (contador)
- [ ] Guia de deploy
- [ ] Pol√≠tica de privacidade (LGPD)

---

## üéì PERFIL DO DESENVOLVEDOR

**Experi√™ncia:**
- JavaScript (avan√ßado)
- TypeScript (intermedi√°rio)
- Node.js (avan√ßado)
- React (aprendendo)
- MySQL (b√°sico)
- Python (aprendendo)

**Objetivos com este projeto:**
- Aprender React na pr√°tica
- Melhorar TypeScript
- Criar projeto portfolio completo
- Implementar arquitetura h√≠brida cloud/local

---

## ‚ö†Ô∏è RESTRI√á√ïES E CONSIDERA√á√ïES

### Restri√ß√µes:
- Documentos sens√≠veis devem poder ser armazenados em servidor local
- Sistema deve respeitar LGPD
- Prazo de 72h √© obrigat√≥rio (documento original da contabilidade)
- Arquitetura deve permitir migra√ß√£o cloud ‚Üí h√≠brido no futuro

### Considera√ß√µes:
- Come√ßar 100% cloud para validar r√°pido
- Migrar para h√≠brido ap√≥s valida√ß√£o
- Priorizar seguran√ßa sobre funcionalidades extras
- C√≥digo limpo e bem documentado para manuten√ß√£o futura

---

## üéØ RESULTADO ESPERADO

Um sistema web completo, seguro e profissional que:
- Elimina processos manuais (email/WhatsApp)
- Organiza e padroniza o envio de informa√ß√µes
- Garante cumprimento de prazos (72h)
- Facilita comunica√ß√£o cliente-contador
- Mant√©m documentos seguros e organizados
- Gera protocolos rastre√°veis
- Proporciona transpar√™ncia no status dos processos
- √â escal√°vel para crescimento futuro

---

## üí° PR√ìXIMOS PASSOS

1. Criar schema completo do Prisma (banco de dados)
2. Configurar estrutura de pastas (backend + frontend)
3. Implementar autentica√ß√£o (JWT)
4. Desenvolver formul√°rio de constitui√ß√£o
5. Implementar upload de documentos
6. Criar sistema de protocolo
7. Desenvolver dashboards
8. Implementar notifica√ß√µes
9. Testes completos
10. Deploy inicial (cloud)
11. Validar com usu√°rios reais
12. Migrar para h√≠brido (se necess√°rio)

---

## üìû CONTEXTO ADICIONAL

**Empresa:** Contabilidade LTDA - CNPJ 25.701.707/0001-56  
**Localiza√ß√£o:** Belo Horizonte - MG  
**Documenta√ß√£o base:** Comunicado sobre fluxo de envio de informa√ß√µes (item 4 - Constitui√ß√£o, Altera√ß√£o e Baixa)

Este sistema faz parte de uma iniciativa maior de digitaliza√ß√£o dos processos do escrit√≥rio cont√°bil.